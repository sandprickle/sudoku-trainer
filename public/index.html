<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography"></script>
    <script>
      tailwind.config = {
        content: ['./index.html', './src/**/*.{html,js,elm}'],
        theme: {
          extend: {
            gridTemplateColumns: {
              layout: '1fr',
            },

            gridTemplateRows: {
              layout: 'auto 1fr',
            },

            colors: {
              primary: tailwind.colors.rose[700],
            },

            letterSpacing: {
              huge: '1em',
            },
          },
        },
      }
    </script>

    <style type="text/tailwindcss">
      body {
        @apply bg-zinc-900 text-zinc-300 h-screen w-screen;
      }

      .btn {
        @apply bg-primary font-bold text-zinc-300 hover:bg-rose-600 hover:text-zinc-200 px-4 py-2 rounded-full;
      }

      /* Puzzle Preview */
      .puzzle-preview {
        @apply border-2 border-zinc-500;
      }
      .puzzle-preview td {
        @apply h-8 w-8 text-sm border border-zinc-700;
      }
      .puzzle-preview td > div {
        @apply flex justify-center items-center;
      }
      .puzzle-preview tr:nth-of-type(3n) {
        @apply border-b-2 border-b-zinc-500;
      }
      .puzzle-preview td:nth-of-type(3n) {
        @apply border-r-2 border-r-zinc-500;
      }

      /* Puzzle */
      .puzzle tr:nth-of-type(3n) {
        @apply border-b-2 border-b-zinc-500;
      }
      .puzzle td:nth-of-type(3n) {
        @apply border-r-2 border-r-zinc-500;
      }
      .puzzle td .selected {
        @apply border-2 border-primary bg-zinc-800;
      }
      .puzzle td .problem {
        @apply bg-red-900;
      }
      
    </style>
  </head>
  <body>
    <script src="/dist/elm.js"></script>
    <script>
      const gridKey = 'grid'
      const app = Elm.Main.init({
        flags: JSON.parse(localStorage.getItem(gridKey)),
      })

      app.ports.saveGrid.subscribe((grid) => {
        localStorage.setItem(gridKey, JSON.stringify(grid))
        app.ports.gridReceiver.send(grid)
      })

      app.ports.loadGrid.subscribe(() => {
        app.ports.gridReceiver.send(JSON.parse(localStorage.getItem(gridKey)))
      })
    </script>
  </body>
</html>
